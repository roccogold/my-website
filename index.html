<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
<title>Rocco Goldschmidt — Product Manager</title>
<meta name="description" content="Rocco Goldschmidt — Product Manager blending design, technology & finance to build simple, impactful solutions. Explore my projects and get in touch." />
<meta name="robots" content="index, follow" />

<!-- Enhanced Security Headers -->
<meta http-equiv="Content-Security-Policy" 
      content="default-src 'self'; 
               script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://cdn.emailjs.com https://api.github.com;
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
               font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
               img-src 'self' data: https:;
               connect-src 'self' https://api.github.com https://api.emailjs.com;">

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111111">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="msapplication-navbutton-color" content="#111111">
<meta name="msapplication-TileColor" content="#111111">

<!-- Favicon and touch icons -->
<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="assets/favicon-48x48.png">
<link rel="icon" type="image/png" sizes="192x192" href="assets/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="assets/android-chrome-512x512.png">
<link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
<link rel="shortcut icon" href="assets/favicon.ico">

<!-- Performance optimizations -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="https://api.github.com">
<link rel="dns-prefetch" href="https://api.emailjs.com">
<link rel="preload" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" as="style">

<!-- Fonts and icons with SRI -->
<link rel="stylesheet" 
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://roccogold.com/" />
<meta property="og:title" content="Rocco Goldschmidt" />
<meta property="og:description" content="Product Manager focused on building projects at the intersection of design, tech, and finance." />
<meta property="og:image" content="https://roccogold.com/og-color.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Rocco Goldschmidt" />
<meta name="twitter:description" content="Product Manager focused on building projects at the intersection of design, tech, and finance." />
<meta name="twitter:image" content="https://roccogold.com/og-color.png" />
<meta name="twitter:url" content="https://roccogold.com/" />

      
<!-- Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Rocco Goldschmidt",
  "jobTitle": "Product Manager",
  "url": "https://roccogold.com",
  "description": "Product Manager blending design, technology & finance to build simple, impactful solutions",
  "sameAs": [
    "https://www.linkedin.com/in/roccogoldschmidt/",
    "https://github.com/roccogold",
    "https://x.com/roccogold_"
  ],
  "worksFor": {
    "@type": "Organization",
    "name": "Moody's Analytics"
  }
}
</script>

<style>
:root {
  /* Enhanced Theme Colors with better contrast */
  --accent-dark: #9a77c6;
  --accent-dark-hover: #b18cd9;
  --bg-dark: #111;
  --text-dark: #e5e5e5;
  
  /* Enhanced Typography Scale - Reduced sizes */
  --font-xs: clamp(0.7rem, 1.8vw, 0.8rem);
  --font-sm: clamp(0.8rem, 2.2vw, 0.9rem);
  --font-md: clamp(0.9rem, 2.7vw, 1rem);
  --font-lg: clamp(1.1rem, 3.5vw, 1.3rem);
  --font-xl: clamp(1.3rem, 4.5vw, 1.7rem);
  
  /* Spacing Scale */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 2rem;
  --space-xl: 3rem;
  
  /* Main Font */
  --main-font: 'JetBrains Mono', 'Courier New', monospace;
  
  /* Animation Properties */
  --transition-fast: 0.15s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.6s ease;
}

/* Enhanced Accessibility - Respect user preferences */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@media (prefers-contrast: high) {
  :root {
    --accent-dark: #c499ff;
  }
}

/* Container Queries Support */
.top-bar {
  position: relative;
  max-width: 650px;
  margin: 1rem auto 2rem;
  padding: 0 2rem;
  text-align: center;
  container-type: inline-size;
}

@container (max-width: 480px) {
  .top-bar {
    flex-direction: column;
    align-items: center;
  }
  .top-bar header p {
    margin-top: 0.8rem;
  }
}

.top-bar header {
  margin: 0 auto;
  width: 100%;
  text-align: center;
}

.top-bar header h1 {
  margin: 0;
  font-size: var(--font-xl);
  font-weight: 700;
}

.top-bar header p {
  font-size: var(--font-xs);
  margin-top: 0.4rem;
  opacity: 0.9;
}

/* FIXED: Prevent background overflow and page movement */
html {
  height: 100%;
  overflow-x: hidden;
  max-width: 100vw;
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

body {
  background: var(--bg-dark);
  color: var(--text-dark);
  font-family: var(--main-font);
  margin: 0;
  padding: 0;
  padding-env: safe-area-inset-top env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  font-size: var(--font-sm);
  position: relative;
  transition: background var(--transition-fast), color var(--transition-fast);
  cursor: none;
  line-height: 1.5;
  min-height: 100vh;
  min-height: 100dvh;
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Better mobile viewport handling */
@supports (height: 100dvh) {
  body {
    min-height: 100dvh;
  }
}

/* Prevent zoom on input focus on iOS */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  select, textarea, input[type="text"], input[type="password"], 
  input[type="datetime"], input[type="datetime-local"], 
  input[type="date"], input[type="month"], input[type="time"], 
  input[type="week"], input[type="number"], input[type="email"], 
  input[type="url"] {
    font-size: 16px;
  }
}

/* FIXED: Background pattern that doesn't cause layout issues */
body::before {
  content: '';
  position: fixed;
  top: -100px;
  left: -100px;
  right: -100px;
  bottom: -100px;
  background: radial-gradient(circle, var(--accent-dark) 1px, transparent 1px);
  background-size: 40px 40px;
  opacity: 0.1;
  pointer-events: none;
  z-index: -1;
  transition: background var(--transition-fast), opacity var(--transition-fast);
  will-change: background, opacity;
  transform: translateZ(0);
}

/* Enhanced focus management */
body:focus-within {
  scroll-behavior: smooth;
}

/* Mobile cursor handling */
@media (hover: none), (pointer: coarse) {
  body {
    cursor: auto;
  }
}

a {
  cursor: pointer;
  color: inherit;
  text-decoration: none;
  transition: color var(--transition-fast);
  font-size: inherit;
}

a:hover,
a:focus-visible {
  color: var(--accent-dark-hover);
  text-decoration: underline;
  outline: 2px solid var(--accent-dark);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Enhanced header with better hierarchy */
header {
  text-align: center;
  margin-bottom: var(--space-md);
}

header h1 {
  margin: 0;
  font-size: var(--font-xl);
  font-weight: 700;
  display: inline-block;
  position: relative;
  color: var(--accent-dark); /* Makes the title purple */
  font-size: clamp(1.5rem, 5vw, 2rem); /* Makes it bigger - increased from 1.3rem max to 2rem */
}

@media (max-width: 480px) {
  header {
    padding-top: 3.5rem;
  }
}

header p {
  margin-top: var(--space-sm);
  font-size: var(--font-xs);
  opacity: 0.9;
}

/* Enhanced main content with container queries */
main {
  max-width: 650px;
  margin: auto;
  padding: var(--space-md) var(--space-lg) var(--space-xl);
  line-height: 1.6;
  position: relative;
  z-index: 1;
  font-size: var(--font-sm);
  container-type: inline-size;
}

@container (max-width: 480px) {
  main {
    padding: var(--space-md) var(--space-md) var(--space-xl);
  }
}

/* Enhanced typography */
h2 {
  font-weight: 900;
  font-size: var(--font-lg);
  border-bottom: 1px solid rgba(255,255,255,0.2);
  padding-bottom: var(--space-xs);
  margin-top: var(--space-xl);
  margin-bottom: var(--space-md);
}

/* Enhanced list styling */
ul {
  padding-left: 0;
  margin-left: 0;
  list-style: none;
}

/* 2. Improve bullet points - keep natural text flow */
/* Main list items */
ul li {
  position: relative;
  padding-left: 1.8rem; /* Increased for bigger bullets */
  margin-bottom: 0.7rem;
  font-weight: 500;
  font-size: var(--font-sm);
  line-height: 1.6; /* Good line height for readability */
}

ul li::before {
  content: "•";
  position: absolute;
  left: 0;
  top: 0;
  color: var(--accent-dark);
  font-weight: 900;
  font-size: 20px; /* Bigger bullets */
  line-height: 1.6; /* Match text line height */
}

/* Nested sub-list styling */
ul ul {
  margin-top: 0.5rem;
  margin-left: 0;
  padding-left: 0;
}

ul ul li {
  padding-left: 1.5rem; /* Proper indentation for sub-items */
  margin-bottom: 0.5rem;
  font-size: var(--font-sm); /* Keep same size as main text */
}

ul ul li::before {
  content: "◦"; /* Hollow circle for sub-items */
  font-size: 18px; /* Slightly smaller than main bullets */
  color: var(--accent-dark);
  opacity: 0.8;
  left: 0.3rem; /* Slight offset for visual hierarchy */
}
      
/* Enhanced social icons with container queries */
.social {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  margin-top: 1.5rem;
  position: relative;
  z-index: 1;
  container-type: inline-size;
}

@container (max-width: 300px) {
  .social {
    flex-direction: column;
    align-items: center;
    gap: var(--space-md);
  }
}

@container (min-width: 500px) {
  .social a {
    width: 60px;
    height: 60px;
    font-size: 32px;
  }
}

.social a {
  width: 50px;
  height: 50px;
  font-size: 28px;
  fill: currentColor;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  transition: filter var(--transition-normal), transform var(--transition-normal), color var(--transition-normal);
  color: var(--accent-dark);
  border-radius: 6px;
  border: none;
  background: transparent;
}

.social a:hover,
.social a:focus-visible {
  filter: drop-shadow(0 0 6px var(--accent-dark));
  transform: scale(1.1);
  color: var(--accent-dark-hover);
  cursor: pointer;
  outline: 2px solid var(--accent-dark);
  outline-offset: 2px;
}

/* Enhanced content descriptions */
p.work-desc,
p.contact-desc {
  text-align: left;
  max-width: 100%;
  margin: 0 0 var(--space-md) 0;
  font-style: normal;
  font-size: var(--font-sm);
  font-weight: 500;
  opacity: 0.9;
}

/* Enhanced footer */
footer {
  text-align: center;
  padding: var(--space-md);
  color: rgba(255,255,255,0.6);
  font-size: var(--font-xs);
  position: relative;
  z-index: 1;
}

/* Enhanced selection styling */
::selection {
  background: var(--accent-dark);
  color: white;
}

/* Enhanced cursor effects */
.dot-cursor,
.trailing-dot {
  position: fixed;
  top: 0;
  left: 0;
  border-radius: 50%;
  pointer-events: none;
  transform: translate(-50%, -50%);
  z-index: 10000;
  transition: background-color var(--transition-normal);
}

.dot-cursor {
  width: 8px;
  height: 8px;
  background: var(--accent-dark);
}

.trailing-dot {
  width: 12px;
  height: 12px;
  background: var(--accent-dark);
  opacity: 0.7;
  z-index: 9999;
}

@media (hover: none), (pointer: coarse) {
  .dot-cursor,
  .trailing-dot {
    display: none;
  }
}

/* Enhanced animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes revealUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity var(--transition-slow), transform var(--transition-slow);
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0);
  animation: revealUp var(--transition-slow) ease forwards;
}

/* Enhanced code styling */
code, pre {
  font-family: var(--main-font);
  font-size: 1em;
  background-color: rgba(255,255,255,0.1);
  color: inherit;
  padding: 0.2em 0.4em;
  border-radius: 4px;
  white-space: pre-wrap;
}

/* Enhanced contact form */
#contactForm {
  max-width: 400px;
  margin: var(--space-md) auto;
}

#contactForm label {
  display: block;
  margin-bottom: var(--space-xs);
  font-weight: 600;
  font-size: var(--font-sm);
}

#contactForm input,
#contactForm textarea {
  width: 100%;
  padding: var(--space-sm);
  margin-bottom: var(--space-sm);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 4px;
  font-size: var(--font-sm);
  font-family: var(--main-font);
  background-color: rgba(255,255,255,0.05);
  color: inherit;
  transition: border-color var(--transition-normal), background-color var(--transition-normal);
}

#contactForm input:focus,
#contactForm textarea:focus {
  border-color: var(--accent-dark);
  outline: none;
  background-color: rgba(255,255,255,0.1);
}

#contactForm button {
  padding: var(--space-sm) var(--space-md);
  cursor: pointer;
  border: none;
  background: var(--accent-dark);
  color: white;
  border-radius: 4px;
  font-size: var(--font-sm);
  font-family: var(--main-font);
  transition: background-color var(--transition-normal), transform var(--transition-fast);
  font-weight: 600;
}

#contactForm button:hover,
#contactForm button:focus {
  background: var(--accent-dark-hover);
  transform: translateY(-1px);
  outline: 2px solid var(--accent-dark);
  outline-offset: 2px;
}

#formStatus {
  margin-top: var(--space-sm);
  font-size: var(--font-xs);
  font-weight: 500;
  opacity: 0.8;
}
</style>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VKN0MXTZ4Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-VKN0MXTZ4Q');
</script>
</head>
<body>

<!-- ================= HEADER ================= -->
<div id="topBar" class="top-bar">
  <header class="reveal">
    <h1>Ciao, I'm Rocco Goldschmidt</h1>
    <p>[Product Manager — trying to build things]</p>
  </header>
</div>

<!-- ================= MAIN CONTENT ================= -->
<main id="main-content" role="main" aria-label="Portfolio content">
  <p class="work-desc reveal">I work where design, tech and finance meet — turning complicated fintech puzzles into smooth solutions.</p>

  <section aria-labelledby="work-heading" class="reveal">
    <h2 id="work-heading">My work</h2>
    <ul>
      <li><u><a href="https://www.moodys.com/web/en/us/solutions/compliance-third-party-risk/maxsight.html" target="_blank" rel="noopener noreferrer">[Moody's Analytics]</a></u>: currently building APIs that make onboarding so easy, even your grandpa could integrate them.</li>
      <li><u><a href="https://www.bitpanda.com/en" target="_blank" rel="noopener noreferrer">[Bitpanda]</a></u>: worked on the backend of the broker app to streamline operations, compliance and support processes for smoother trading days.</li>
      <li>Other projects:
        <ul>
          <li><u><a href="https://github.com/roccogold/insurtrain" target="_blank" rel="noopener noreferrer">[insurtrain]</a></u>: decentralized insurance solution on smart contracts to automate claims processing for train delays.</li>
          <li><u><a href="https://github.com/roccogold/tbills-auction" target="_blank" rel="noopener noreferrer">[tbills-auctions]</a></u>: blockchain-based solution that automates treasury bill auctions.</li>
        </ul>
      </li>
      <li>Currently juggling APIs and dreaming up new ways to make fintech less boring. Got a challenge? Let's solve it together.</li>
    </ul>
  </section>
  
  <section aria-labelledby="contact-heading" class="reveal">
    <h2 id="contact-heading">Get in touch</h2>
    <p class="contact-desc">
      Let's connect whether it's about product stuff, fintech trends or the best ping pong serve.
    </p>
    <p class="contact-desc">
      Want the juicy bits? Download my resume <a href="https://drive.google.com/file/d/11c8tkDc5AH3pCAEgM44WR4d9w4cxoMR5/view" 
      target="_blank" rel="noopener noreferrer" id="resumeDownload"><u>here</u></a>.
    </p>
    
    <nav class="social" aria-label="Social and contact links" role="navigation">
      <a href="mailto:roccogold23@gmail.com" aria-label="Email Rocco Goldschmidt" target="_blank" rel="noopener noreferrer">
        <i class="fas fa-envelope" aria-hidden="true"></i>
      </a>
      <a href="https://www.linkedin.com/in/roccogoldschmidt/" aria-label="LinkedIn profile" target="_blank" rel="noopener noreferrer">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
      <a href="https://github.com/roccogold" aria-label="GitHub profile" target="_blank" rel="noopener noreferrer">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      <a href="https://x.com/roccogold_" aria-label="Twitter profile" target="_blank" rel="noopener noreferrer">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
    </nav>
    
    <!-- Enhanced Contact Form -->
    <form id="contactForm" aria-label="Contact form to send a message" novalidate>
      <label for="name">Name <span aria-label="required">*</span></label>
      <input type="text" 
             id="name" 
             name="name" 
             required 
             placeholder="Your name"
             aria-describedby="name-error"
             autocomplete="name" />
      <div id="name-error" class="error-message" role="alert" aria-live="polite"></div>
      
      <label for="email">Email <span aria-label="required">*</span></label>
      <input type="email" 
             id="email" 
             name="email" 
             required 
             placeholder="Your email"
             aria-describedby="email-error"
             autocomplete="email" />
      <div id="email-error" class="error-message" role="alert" aria-live="polite"></div>
      
      <label for="message">Message <span aria-label="required">*</span></label>
      <textarea id="message" 
                name="message" 
                rows="4" 
                required 
                placeholder="Your message"
                aria-describedby="message-error"></textarea>
      <div id="message-error" class="error-message" role="alert" aria-live="polite"></div>
      
      <button type="submit" aria-describedby="formStatus">Send</button>
      <p id="formStatus" aria-live="polite" role="status"></p>
    </form>
  </section>
</main>

<!-- ================= FOOTER ================= -->
<footer role="contentinfo">
  <span id="lastUpdated"></span>
</footer>

<!-- Enhanced cursor elements -->
<div class="dot-cursor" aria-hidden="true"></div>
<div class="trailing-dot" aria-hidden="true"></div>

<!-- Enhanced JavaScript with modules -->
<script type="module">
// Custom Cursor Module
class CustomCursor {
  constructor() {
    this.isSupported = window.matchMedia('(hover: hover) and (pointer: fine)').matches;
    if (this.isSupported) {
      this.init();
    }
  }

  init() {
    this.dot = document.querySelector('.dot-cursor');
    this.trail = document.querySelector('.trailing-dot');
    this.mouseX = window.innerWidth / 2;
    this.mouseY = window.innerHeight / 2;
    this.trailX = this.mouseX;
    this.trailY = this.mouseY;

    this.setupEventListeners();
    this.animate();
  }

  setupEventListeners() {
    document.addEventListener('mousemove', (e) => {
      this.mouseX = e.clientX;
      this.mouseY = e.clientY;
      if (this.dot) {
        this.dot.style.left = this.mouseX + 'px';
        this.dot.style.top = this.mouseY + 'px';
      }
    });

    // Hide cursor when leaving viewport
    document.addEventListener('mouseleave', () => {
      if (this.dot) this.dot.style.opacity = '0';
      if (this.trail) this.trail.style.opacity = '0';
    });

    document.addEventListener('mouseenter', () => {
      if (this.dot) this.dot.style.opacity = '1';
      if (this.trail) this.trail.style.opacity = '0.7';
    });
  }

  animate() {
    this.trailX += (this.mouseX - this.trailX) * 0.15;
    this.trailY += (this.mouseY - this.trailY) * 0.15;
    
    if (this.trail) {
      this.trail.style.left = this.trailX + 'px';
      this.trail.style.top = this.trailY + 'px';
    }
    
    requestAnimationFrame(() => this.animate());
  }
}

// Scroll Animations Module
class ScrollAnimations {
  constructor() {
    this.reveals = document.querySelectorAll('.reveal');
    this.observer = null;
    this.init();
  }

  init() {
    // Use Intersection Observer for better performance
    const observerOptions = {
      threshold: 0.15,
      rootMargin: '0px 0px -50px 0px'
    };

    this.observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          this.observer.unobserve(entry.target); // Stop observing once revealed
        }
      });
    }, observerOptions);

    this.reveals.forEach(element => {
      this.observer.observe(element);
    });
  }
}

// Enhanced Contact Form Module
class ContactForm {
  constructor() {
    this.form = document.getElementById('contactForm');
    this.status = document.getElementById('formStatus');
    this.isSubmitting = false;
    this.init();
  }

  init() {
    if (!this.form) return;
    
    this.loadEmailJS();
    this.setupEventListeners();
  }

  async loadEmailJS() {
    try {
      if (!window.emailjs) {
        await this.loadScript('https://cdn.emailjs.com/dist/email.min.js');
        emailjs.init('HNfQEsAopw8TGCkop');
      }
    } catch (error) {
      console.error('Failed to load EmailJS:', error);
    }
  }

  loadScript(src) {
    return new Promise((resolve, reject) => {
      const script = document.createElement('script');
      script.src = src;
      script.onload = resolve;
      script.onerror = reject;
      document.body.appendChild(script);
    });
  }

  setupEventListeners() {
    this.form.addEventListener('submit', (e) => this.handleSubmit(e));
    
    // Real-time validation
    const inputs = this.form.querySelectorAll('input, textarea');
    inputs.forEach(input => {
      input.addEventListener('blur', () => this.validateField(input));
      input.addEventListener('input', () => this.clearFieldError(input));
    });
  }

  validateField(field) {
    const errorElement = document.getElementById(`${field.id}-error`);
    if (!errorElement) return;

    let errorMessage = '';

    if (field.hasAttribute('required') && !field.value.trim()) {
      errorMessage = `${field.labels[0].textContent.replace('*', '').trim()} is required`;
    } else if (field.type === 'email' && field.value && !this.isValidEmail(field.value)) {
      errorMessage = 'Please enter a valid email address';
    }

    if (errorMessage) {
      errorElement.textContent = errorMessage;
      errorElement.style.display = 'block';
      field.setAttribute('aria-invalid', 'true');
      return false;
    } else {
      errorElement.textContent = '';
      errorElement.style.display = 'none';
      field.removeAttribute('aria-invalid');
      return true;
    }
  }

  clearFieldError(field) {
    const errorElement = document.getElementById(`${field.id}-error`);
    if (errorElement) {
      errorElement.textContent = '';
      errorElement.style.display = 'none';
    }
    field.removeAttribute('aria-invalid');
  }

  isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  async handleSubmit(event) {
    event.preventDefault();
    
    if (this.isSubmitting) return;
    
    // Validate all fields
    const fields = this.form.querySelectorAll('input[required], textarea[required]');
    let isValid = true;
    
    fields.forEach(field => {
      if (!this.validateField(field)) {
        isValid = false;
      }
    });

    if (!isValid) {
      this.showStatus('Please fix the errors above.', 'error');
      return;
    }

    this.isSubmitting = true;
    this.showStatus('Sending message...', 'loading');

    try {
      if (window.emailjs) {
        await emailjs.sendForm('service_c8d9vna', 'template_b66ttzh', this.form);
        this.showStatus('Message sent! Thank you for reaching out.', 'success');
        this.form.reset();
        
        // Analytics tracking
        if (window.gtag) {
          gtag('event', 'contact_form_submit', {
            event_category: 'engagement',
            event_label: 'success'
          });
        }
      } else {
        throw new Error('EmailJS not available');
      }
    } catch (error) {
      console.error('Email error:', error);
      this.showStatus('Oops! Something went wrong. Please try again later.', 'error');
      
      if (window.gtag) {
        gtag('event', 'contact_form_error', {
          event_category: 'error',
          event_label: error.message || 'unknown'
        });
      }
    } finally {
      this.isSubmitting = false;
    }
  }

  showStatus(message, type) {
    if (!this.status) return;
    
    this.status.textContent = message;
    this.status.className = `form-status ${type}`;
    
    // Auto-clear success messages
    if (type === 'success') {
      setTimeout(() => {
        this.status.textContent = '';
        this.status.className = '';
      }, 5000);
    }
  }
}

// GitHub Integration Module
class GitHubIntegration {
  constructor() {
    this.lastUpdatedElement = document.getElementById('lastUpdated');
    this.init();
  }

  async init() {
    if (!this.lastUpdatedElement) return;
    
    try {
      const response = await fetch('https://api.github.com/repos/roccogold/my-website/actions/runs?per_page=1');
      if (!response.ok) throw new Error('GitHub API request failed');
      
      const data = await response.json();
      if (data.workflow_runs && data.workflow_runs.length > 0) {
        this.displayLastUpdated(data.workflow_runs[0]);
      } else {
        this.displayFallback();
      }
    } catch (error) {
      console.warn('GitHub API error:', error);
      this.displayFallback();
    }
  }

  displayLastUpdated(run) {
    const updatedDate = new Date(run.updated_at);
    const day = String(updatedDate.getDate()).padStart(2, '0');
    const month = String(updatedDate.getMonth() + 1).padStart(2, '0');
    const year = updatedDate.getFullYear();
    const hours = String(updatedDate.getHours()).padStart(2, '0');
    const minutes = String(updatedDate.getMinutes()).padStart(2, '0');
    const username = run.actor?.login || "unknown";
    
    this.lastUpdatedElement.textContent =
      `© Updated on ${day}-${month}-${year} ${hours}:${minutes} by ${username} — work in progress, just like me.`;
  }

  displayFallback() {
    this.lastUpdatedElement.textContent = "© Site updated recently — work in progress.";
  }
}

// Core Web Vitals monitoring
class PerformanceMonitor {
  constructor() {
    this.init();
  }

  async init() {
    try {
      const { getCLS, getFID, getFCP, getLCP, getTTFB } = await import('https://unpkg.com/web-vitals@3?module');
      
      getCLS(this.sendToAnalytics);
      getFID(this.sendToAnalytics);
      getFCP(this.sendToAnalytics);
      getLCP(this.sendToAnalytics);
      getTTFB(this.sendToAnalytics);
    } catch (error) {
      console.warn('Web Vitals monitoring failed:', error);
    }
  }

  sendToAnalytics(metric) {
    if (window.gtag) {
      gtag('event', metric.name, {
        event_category: 'Web Vitals',
        value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),
        event_label: metric.id,
        non_interaction: true,
      });
    }
  }
}

// Initialize all modules when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  // Initialize core functionality
  new CustomCursor();
  new ScrollAnimations();
  new ContactForm();
  new GitHubIntegration();
  new PerformanceMonitor();

  // Resume download tracking
  const resumeLink = document.getElementById('resumeDownload');
  resumeLink?.addEventListener('click', () => {
    if (window.gtag) {
      gtag('event', 'resume_download', {
        event_category: 'engagement',
        event_label: 'Resume PDF Download'
      });
    }
  });
});

// Register service worker for PWA functionality
if ('serviceWorker' in navigator) {
  window.addEventListener('load', async () => {
    try {
      const registration = await navigator.serviceWorker.register('/sw.js');
      console.log('ServiceWorker registered successfully');
      
      // Check for updates
      registration.addEventListener('updatefound', () => {
        console.log('New service worker available');
      });
    } catch (error) {
      console.log('ServiceWorker registration failed:', error);
    }
  });
}

// Listen for cache update messages from service worker
if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
  navigator.serviceWorker.addEventListener('message', event => {
    if (event.data.type === 'CACHE_UPDATED') {
      // Optionally refresh the page to get fresh theme code
      console.log('Cache updated, fresh content available');
      // Uncomment the next line if you want automatic refresh on cache updates
      // window.location.reload();
    }
  });
}
</script>

<!-- Screen reader only styles -->
<style>
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.error-message {
  display: none;
  color: #ff6b6b;
  font-size: var(--font-xs);
  margin-top: var(--space-xs);
  margin-bottom: var(--space-sm);
}

.form-status.success {
  color: #51cf66;
}

.form-status.error {
  color: #ff6b6b;
}

.form-status.loading {
  color: var(--accent-dark);
}
</style>
</body>
</html>
